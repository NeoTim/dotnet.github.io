<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class CriticalHandle
   | CoreCLR site </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class CriticalHandle
   | CoreCLR site ">
    
    <link rel="shortcut icon" href="../images/Logo_DotNet.png" type="image/x-icon">
    <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/style.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63735192-1', 'auto');
    ga('send', 'pageview');
    </script>
  </head>  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse">
             <div class="container">
               <a href="../"><img height="50px" src="../images/Logo_DotNet.png" style="float:right;"></a>
               <div class="navbar-header ">
                 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                   <span class="sr-only">Toggle navigation</span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                 </button>
                 <a class="navbar-brand" href="../"><span class="dotnet">.NET Core</span></a>
               </div>
               <div id="navbar" class="collapse navbar-collapse">
               </div><!--/.nav-collapse -->
             </div>
           </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content">
              
              <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="pull-right mobile-hide"><span class="fa fa-github"></span>Improve this Doc</a>
              <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.Manual.cs/#L20" class="pull-right mobile-hide">View Source</a>
              <h1 id="System_Runtime_InteropServices_CriticalHandle" data-uid="System.Runtime.InteropServices.CriticalHandle">Class CriticalHandle
              </h1>
              <div class="markdown level0 summary"><p>Represents a wrapper class for handle resources.</p>
</div>
              <div class="markdown level0 conceptual"></div>
              <div class="inheritance">
                <h5>Inheritance</h5>
                  <div class="level0"><a class="xref" href="System.Object.html#System_Object">Object</a></div>
                  <div class="level1"><span class="xref">CriticalHandle</span></div>
              </div>
              <h6><strong>Namespace</strong>:System.Runtime.InteropServices</h6>
              <h6><strong>Assembly</strong>:System.Runtime.Handles.dll</h6>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_syntax">Syntax</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public abstract class CriticalHandle : IDisposable</code></pre>
              </div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_remarks"><strong>Remarks</strong></h5>
              <div class="markdown level0 remarks"><p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class is similar to the <a class="xref" href="System.Runtime.InteropServices.SafeHandle.html#System_Runtime_InteropServices_SafeHandle">SafeHandle</a> class, except that <a class="xref" href="System.Runtime.InteropServices.SafeHandle.html#System_Runtime_InteropServices_SafeHandle">SafeHandle</a> implements reference counting. You can use <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> instead of <a class="xref" href="System.Runtime.InteropServices.SafeHandle.html#System_Runtime_InteropServices_SafeHandle">SafeHandle</a> to address performance considerations when you can provide the necessary synchronization more efficiently yourself.</p>
<p>Because the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class does not perform reference counting, it does not provide protection from handle recycling security attacks. Because the reference counting algorithm implicitly serializes operations, a certain amount of thread safety is also lost. If you call the <a class="xref" href="System.IDisposable.html#System_IDisposable_Dispose">Dispose()</a> or <span class="xref">System.Runtime.InteropServices.SafeHandle.Close</span> method while an operation that is using the handle is outstanding on another thread, or if you call <a class="xref" href="System.IDisposable.html#System_IDisposable_Dispose">Dispose()</a> or <span class="xref">System.Runtime.InteropServices.SafeHandle.Close</span> from two threads at the same time, the results are non-deterministic. The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class still provides the guaranteed critical finalization provided by the <span class="xref">System.Runtime.ConstrainedExecution.CriticalFinalizerObject</span> class.</p>
</div>
              <h3 id="constructors">Constructors
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle__ctor_System_IntPtr_.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.%23ctor(System.IntPtr)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L33">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle__ctor_System_IntPtr_" data-uid="System.Runtime.InteropServices.CriticalHandle.#ctor(System.IntPtr)">CriticalHandle(IntPtr)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class with the specified invalid handle value.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected CriticalHandle(IntPtr invalidHandleValue)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.IntPtr.html#System_IntPtr">IntPtr</a></td>
                    <td><em>invalidHandleValue</em></td>
                    <td><p>The value of an invalid handle (usually 0 or -1).</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.TypeLoadException.html#System_TypeLoadException">TypeLoadException</a></td>
                    <td><p>The derived class resides in an assembly without unmanaged code access permission.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="fields">Fields
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_handle.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.handle%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L32">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_handle" data-uid="System.Runtime.InteropServices.CriticalHandle.handle">handle</h4>
              <div class="markdown level1 summary"><p>Specifies the handle to be wrapped.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_handle_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Do not expose the handle publicly (that is, outside of the derived class).</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected IntPtr handle</code></pre>
              </div>
              <h3 id="properties">Properties
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_IsClosed.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.IsClosed%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L34">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_IsClosed" data-uid="System.Runtime.InteropServices.CriticalHandle.IsClosed">IsClosed</h4>
              <div class="markdown level1 summary"><p>Gets a value indicating whether the handle is closed.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_IsClosed_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p><p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsClosed">IsClosed</a> method returns a value indicating whether the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object&#39;s handle is no longer associated with a native resource. This differs from the definition of the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsInvalid">IsInvalid</a> property, which computes whether a given handle is always considered invalid. The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsClosed">IsClosed</a> method returns a <strong>true</strong> value in the following cases:</p></p>
<ul><li>
<p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid">SetHandleAsInvalid()</a> method was called.</p>
</li><li>
<p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose">Dispose()</a> method or <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> method was called and there are no references to the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object on other threads.</p>
</li></ul>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public bool IsClosed { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the handle is closed; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_IsInvalid.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.IsInvalid%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L35">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_IsInvalid" data-uid="System.Runtime.InteropServices.CriticalHandle.IsInvalid">IsInvalid</h4>
              <div class="markdown level1 summary"><p>When overridden in a derived class, gets a value indicating whether the handle value is invalid.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_IsInvalid_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Derived classes must implement the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsInvalid">IsInvalid</a> property so that the common language runtime can determine whether critical finalization is required. Derived classes must provide an implementation that suits the general type of handle they support (0 or -1 is invalid). These classes can then be further derived for specific safe handle types.</p>
<p>Unlike the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsClosed">IsClosed</a> property, which reports whether the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object has finished using the underlying handle, the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsInvalid">IsInvalid</a> property calculates whether the given handle value is always considered invalid. Therefore, the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsInvalid">IsInvalid</a> property always returns the same value for any one handle value.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public abstract bool IsInvalid { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the handle is valid; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="methods">Methods
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_Dispose.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.Dispose%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L36">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_Dispose" data-uid="System.Runtime.InteropServices.CriticalHandle.Dispose">Dispose()</h4>
              <div class="markdown level1 summary"><p>Releases all resources used by the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a>. </p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_Dispose_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Calling the <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> or <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose">Dispose()</a> method allows the resources to be freed. Unlike the <a class="xref" href="System.Runtime.InteropServices.SafeHandle.html#System_Runtime_InteropServices_SafeHandle">SafeHandle</a> class, this will always happen immediately since there is no reference count to indicate that other threads are using this handle. Therefore, you must employ a synchronization mechanism to ensure it is safe to call the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose">Dispose()</a> method. Although most classes that use the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class do not need to provide a finalizer, this is sometimes necessary (for example, to flush out file buffers or to write some data back into memory). In this case, the class can provide a finalizer that is guaranteed to run before the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> critical finalizer runs.</p>
<p>Call the <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> or <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose">Dispose()</a> method when you are finished using the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object. The <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> method leaves the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object in an unusable state.</p>
<p>Note   Always call the <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> or <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose">Dispose()</a> method before you release your last reference to the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object. Otherwise, the resources it is using will not be freed until the garbage collector calls the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> object&#39;s <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Finalize">Finalize()</a> method.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
              </div>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_Dispose_System_Boolean_.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.Dispose(System.Boolean)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L38">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_Dispose_System_Boolean_" data-uid="System.Runtime.InteropServices.CriticalHandle.Dispose(System.Boolean)">Dispose(Boolean)</h4>
              <div class="markdown level1 summary"><p>Releases the unmanaged resources used by the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class specifying whether to perform a normal dispose operation.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_Dispose_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>You should never explicitly call the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Dispose_System_Boolean_">Dispose(Boolean)</a> method with the <em>disposing</em> parameter set to <strong>false</strong>.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected virtual void Dispose(bool disposing)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><em>disposing</em></td>
                    <td><p>
<strong>true</strong> for a normal dispose operation; <strong>false</strong> to finalize the handle.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_Finalize.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.Finalize%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.Manual.cs/#L23">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_Finalize" data-uid="System.Runtime.InteropServices.CriticalHandle.Finalize">Finalize()</h4>
              <div class="markdown level1 summary"><p>Frees all resources associated with the handle.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_Finalize_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_Finalize">Finalize()</a> method is the destructor for the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> class. Application code should not call this method directly.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected void Finalize()</code></pre>
              </div>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_ReleaseHandle.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.ReleaseHandle%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L40">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_ReleaseHandle" data-uid="System.Runtime.InteropServices.CriticalHandle.ReleaseHandle">ReleaseHandle()</h4>
              <div class="markdown level1 summary"><p>When overridden in a derived class, executes the code required to free the handle.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_ReleaseHandle_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> method is guaranteed to be called only once, provided that you employ proper synchronization mechanisms to ensure that only one call to the <span class="xref">System.Runtime.InteropServices.CriticalHandle.Close</span> or <see cref="Overload:System.Runtime.InteropServices.CriticalHandle.Dispose"></see> method is made. The <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> method will not be called if the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsInvalid">IsInvalid</a> or <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_IsClosed">IsClosed</a> property is <strong>true</strong>. Implement this method in your <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> derived classes to execute any code that is required to free the handle. Because one of the functions of <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle">CriticalHandle</a> is to guarantee prevention of resource leaks, the code in your implementation of <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> must never fail. The garbage collector calls <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> after normal finalizers have been run for objects that were garbage collected at the same time, and guarantees the resources to invoke it and that it will not be interrupted while it is in progress. This method will be prepared as a constrained execution region (CER) at instance construction time (along with all the methods in its statically determinable call graph). Although this prevents thread abort interrupts, you must still be careful not to introduce any fault paths in your overridden <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> method. In particular, apply the <span class="xref">System.Runtime.ConstrainedExecution.ReliabilityContractAttribute</span> attribute to any methods you call from <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a>. In most cases this code should be:</p>
<p>
<code>ReliabilityContract(Consistency.WillNotCorruptState, Cer.Success)</code>
</p>
<p>Additionally, for simple cleanup (for example, calling the Win32 API <strong>CloseHandle</strong> on a file handle) you can check the return value for the single platform invoke call. For complex cleanup, you may have a lot of program logic and many method calls, some of which might fail. You must ensure that your program logic has fallback code for each of those cases.</p>
<p>If the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_ReleaseHandle">ReleaseHandle()</a> method returns <strong>false</strong> for any reason, it generates a releaseHandleFailed MDA Managed Debugging Assistant.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected abstract bool ReleaseHandle()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the handle is released successfully; otherwise, in the event of a catastrophic failure,<strong> false</strong>. In this case, it generates a releaseHandleFailed MDA Managed Debugging Assistant.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_SetHandle_System_IntPtr_.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.SetHandle(System.IntPtr)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L41">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_SetHandle_System_IntPtr_" data-uid="System.Runtime.InteropServices.CriticalHandle.SetHandle(System.IntPtr)">SetHandle(IntPtr)</h4>
              <div class="markdown level1 summary"><p>Sets the handle to the specified pre-existing handle.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_SetHandle_System_IntPtr__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Use the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_SetHandle_System_IntPtr_">SetHandle(IntPtr)</a> method only if you need to support a pre-existing handle (for example, if the handle is returned in a structure) because the .NET Framework COM interop infrastructure does not support marshaling handles in a structure.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected void SetHandle(IntPtr handle)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.IntPtr.html#System_IntPtr">IntPtr</a></td>
                    <td><em>handle</em></td>
                    <td><p>The pre-existing handle to use.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid.md&amp;value=---%0Auid%3A%20System.Runtime.InteropServices.CriticalHandle.SetHandleAsInvalid%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Runtime.Handles/ref/System.Runtime.Handles.cs/#L42">View Source</a>
              </span>
              <h4 id="System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid" data-uid="System.Runtime.InteropServices.CriticalHandle.SetHandleAsInvalid">SetHandleAsInvalid()</h4>
              <div class="markdown level1 summary"><p>Marks a handle as invalid.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Call the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid">SetHandleAsInvalid()</a> method only when you know that your handle is invalid and you want to mark it as such. Doing so does not change the value of the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_handle">handle</a> field; it only marks the handle as invalid. The handle might then contain a potentially stale value. The effect of this call is that no attempt is made to free the resources.</p>
<p>As with the <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_SetHandle_System_IntPtr_">SetHandle(IntPtr)</a> method, use <a class="xref" href="System.Runtime.InteropServices.CriticalHandle.html#System_Runtime_InteropServices_CriticalHandle_SetHandleAsInvalid">SetHandleAsInvalid()</a> only if you need to support a pre-existing handle.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void SetHandleAsInvalid()</code></pre>
              </div>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
            <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
            </nav>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="inner-footer">
          <p>© .NET Foundation</p>
          <p>
            <a href="https://www.github.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-github fa-stack-1x"></span>
            </span></a>
            <a href="https://twitter.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-twitter fa-stack-1x"></span>
            </span></a>
            <a href="https://www.facebook.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-facebook fa-stack-1x"></span>
            </span></a>
      
          </p>
          </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
