<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class Lazy&lt;T&gt;
   | CoreCLR site </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class Lazy&lt;T&gt;
   | CoreCLR site ">
    
    <link rel="shortcut icon" href="../images/Logo_DotNet.png" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/style.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63735192-1', 'auto');
    ga('send', 'pageview');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse">
             <div class="container">
               <a href="../"><img height="50px" src="../images/Logo_DotNet.png" style="float:right;"></a>
               <div class="navbar-header ">
                 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                   <span class="sr-only">Toggle navigation</span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                 </button>
                 <a class="navbar-brand" href="../"><span class="dotnet">.NET Core</span></a>
               </div>
               <div id="navbar" class="collapse navbar-collapse">
               </div><!--/.nav-collapse -->
             </div>
           </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content">
              
              <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1.md&amp;value=---%0Auid%3A%20System.Lazy%601%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="pull-right mobile-hide"><span class="fa fa-github"></span>Improve this Doc</a>
              <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L49" class="pull-right mobile-hide">View Source</a>
              <h1 id="System_Lazy_1" data-uid="System.Lazy`1">Class Lazy&lt;T&gt;
              </h1>
              <div class="markdown level0 summary"><p>Provides support for lazy initialization.</p>
</div>
              <div class="markdown level0 conceptual"></div>
              <div class="inheritance">
                <h5>Inheritance</h5>
                  <div class="level0"><a class="xref" href="System.Object.html#System_Object">Object</a></div>
                  <div class="level1"><span class="xref">Lazy&lt;T&gt;</span></div>
              </div>
              <h6><strong>Namespace</strong>:System</h6>
              <h6><strong>Assembly</strong>:System.Runtime.dll</h6>
              <h5 id="System_Lazy_1_syntax">Syntax</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">[Serializable]
[ComVisible(false)]
[DebuggerTypeProxy(typeof (System_LazyDebugView&lt;&gt;))]
[DebuggerDisplay(&quot;ThreadSafetyMode={Mode}, IsValueCreated={IsValueCreated}, IsValueFaulted={IsValueFaulted}, Value={ValueForDebugDisplay}&quot;)]
public class Lazy&lt;T&gt;</code></pre>
              </div>
              <h5 class="typeParameters">Type Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><em>T</em></td>
                    <td>Specifies the type of element being lazily initialized.</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1_examples"><strong>Examples</strong></h5>
              
<p>The following example demonstrates the use of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class to provide lazy initialization with access from multiple threads. </p>
<p>The example uses the <span class="xref">System.Lazy`1.</span> constructor. It also demonstrates the use of the <span class="xref">System.Lazy`1.</span> constructor (specifying <strong>true</strong> for <em>isThreadSafe</em>) and the <span class="xref">System.Lazy`1.</span> constructor (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> for <em>mode</em>). To switch to a different constructor, just change which constructors are commented out. </p>
<p>For an example that demonstrates exception caching using the same constructors, see the <span class="xref">System.Lazy`1.</span> constructor. </p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by one of several threads. The four key sections of code illustrate the creation of the initializer, the factory method, the actual initialization, and the constructor of the <code>LargeObject</code> class, which displays a message when the object is created. At the beginning of the <code>Main</code> method, the example creates the thread-safe lazy initializer for <code>LargeObject</code>: </p>System.Lazy`1#NewLazy<p>The factory method shows the creation of the object, with a placeholder for further initialization: </p>System.Lazy`1#FactoryFunc<p>Note that the first two code sections could be combined by using a lambda function, as shown here: </p>System.Lazy`1#InitWithLambda<p>The example pauses, to indicate that an indeterminate period may elapse before lazy initialization occurs. When you press the Enter key, the example creates and starts three threads. The <code>ThreadProc</code> method that's used by all three threads calls the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property. The first time this happens, the <code>LargeObject</code> instance is created: </p>System.Lazy`1#ValueProp<p>The constructor of the <code>LargeObject</code> class, which includes the last key section of code, displays a message and records the identity of the initializing thread. The output from the program appears at the end of the full code listing. </p>System.Lazy`1#LargeCtor<p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1#All
              <h3 id="constructors">Constructors
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L121">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor" data-uid="System.Lazy`1.#ctor">Lazy()</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class. When lazy initialization occurs, the default constructor of the target type is used.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>An instance that is created with this constructor may be used concurrently from multiple threads.</p>
<p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy()</code></pre>
              </div>
              <h5 id="System_Lazy_1__ctor_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>An instance that is created with this constructor may be used concurrently from multiple threads.</p>
<p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor. It also illustrates the use of the <span class="xref">System.Lazy`1.</span> constructor (specifying <strong>true</strong> for <em>isThreadSafe</em>) and the <span class="xref">System.Lazy`1.</span> constructor (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> for <em>mode</em>). To switch to a different constructor, just change which constructors are commented out. </p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by one of several threads. The two key lines of code in this example are the creation of the initializer and the actual initialization. At the beginning of the <code>Main</code> method, the example creates the thread-safe lazy initializer for <code>LargeObject</code>: </p>System.Lazy`1.ctor#NewLazy<p>The example creates and starts three threads that block on a <a class="xref" href="System.Threading.ManualResetEvent.html#System_Threading_ManualResetEvent">ManualResetEvent</a> object, so that the example can release the threads all at once. The <code>ThreadProc</code> method that's used by all three threads calls the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property to get the <code>LargeObject</code> instance:</p>System.Lazy`1.ctor#ValueProp<p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class provides locking, so that only one thread is allowed to create the <code>LargeObject</code> instance. The example demonstrates that the other threads all get the same instance. </p><p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctor#All
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor_System_Boolean_.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor(System.Boolean)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L150">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor_System_Boolean_" data-uid="System.Lazy`1.#ctor(System.Boolean)">Lazy(Boolean)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class. When lazy initialization occurs, the default constructor of the target type and the specified initialization mode are used.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> if <em>isThreadSafe</em> is <strong>true</strong>; otherwise, the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. To specify the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a> mode, use the <span class="xref">System.Lazy`1.</span> or <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the<a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy(bool isThreadSafe)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><em>isThreadSafe</em></td>
                    <td><p>true if this instance should be usable by multiple threads concurrently; false if the instance will only be used by one thread at a time.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1__ctor_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> if <em>isThreadSafe</em> is <strong>true</strong>; otherwise, the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. To specify the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a> mode, use the <span class="xref">System.Lazy`1.</span> or <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the<a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_System_Boolean__examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor to create a lazy initializer that is not thread safe, for scenarios where all access to the lazily initialized object occurs on the same thread. It also demonstrates the use of the <span class="xref">System.Lazy`1.</span> constructor (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a> for <em>mode</em>. To switch to a different constructor, just change which constructor is commented out.</p>
<p>For code that demonstrates how to use this constructor in multithreaded scenarios (specifying <strong>true</strong> for <em>isThreadSafe</em>), see the example for the <span class="xref">System.Lazy`1.</span> constructor. </p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily. In the <code>Main</code> method, the example creates a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance and then pauses. When you press the Enter key, the example accesses the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance, which causes initialization to occur. The constructor of the <code>LargeObject</code> class displays a console message. </p>
<p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctorBool#All
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor_System_Func__0__.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor(System.Func%7B%600%7D)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L139">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor_System_Func__0__" data-uid="System.Lazy`1.#ctor(System.Func{`0})">Lazy(Func&lt;T&gt;)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class. When lazy initialization occurs, the specified initialization function is used.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_System_Func__0___remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>An instance that is created with this constructor may be used concurrently from multiple threads.</p>
<p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy(Func&lt;T&gt; valueFactory)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Func%601.html#System_Func_1">Func</a>&lt;T&gt;</td>
                    <td><em>valueFactory</em></td>
                    <td><p>The <span class="xref">System.Func{T}</span> invoked to produce the lazily-initialized value when it is
needed.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1__ctor_System_Func__0___remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>An instance that is created with this constructor may be used concurrently from multiple threads.</p>
<p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_System_Func__0___examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor to provide lazy initialization with exception caching. It also demonstrates the use of the <span class="xref">System.Lazy`1.</span> constructor (specifying <strong>true</strong> for <em>isThreadSafe</em>) and the <span class="xref">System.Lazy`1.</span> constructor (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> for <em>mode</em>). To switch to a different constructor, just change which constructors are commented out. </p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by one of several threads. The three key sections of code illustrate the creation of the initializer, the actual initialization, and the constructor of the <code>LargeObject</code> class, which demonstrates exception caching. At the beginning of the <code>Main</code> method, the example creates the thread-safe lazy initializer for <code>LargeObject</code>: </p>System.Lazy`1.ctorFunc#NewLazy<p>The example creates and starts three threads. The <code>ThreadProc</code> method that's used by all three threads calls the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property to get the <code>LargeObject</code> instance:</p>System.Lazy`1.ctorFunc#ValueProp<p>In the constructor of the <code>LargeObject</code> class, the third key section of code throws an exception the first time a <code>LargeObject</code> instance is created, but thereafter allows instance creation to occur: </p>System.Lazy`1.ctorFunc#LargeCtor<p>When the example is run, the first thread that tries to create an instance of <code>LargeObject</code> fails, and the exception is caught. You might expect that the next thread would successfully create an instance, but the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object has cached the exception. Because of this, all three threads throw the exception. </p><p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctorFunc#All
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentNullException.html#System_ArgumentNullException">ArgumentNullException</a></td>
                    <td><p>
<em>valueFactory</em> is <strong>null</strong>. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor_System_Func__0__System_Boolean_.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor(System.Func%7B%600%7D%2CSystem.Boolean)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L178">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor_System_Func__0__System_Boolean_" data-uid="System.Lazy`1.#ctor(System.Func{`0},System.Boolean)">Lazy(Func&lt;T&gt;, Boolean)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class. When lazy initialization occurs, the specified initialization function and initialization mode are used.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> if <em>isThreadSafe</em> is <strong>true</strong>; otherwise, the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>To specify the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a> mode, use the <span class="xref">System.Lazy`1.</span> or <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy(Func&lt;T&gt; valueFactory, bool isThreadSafe)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Func%601.html#System_Func_1">Func</a>&lt;T&gt;</td>
                    <td><em>valueFactory</em></td>
                    <td><p>The <span class="xref">System.Func{T}</span> invoked to produce the lazily-initialized value when it is needed.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><em>isThreadSafe</em></td>
                    <td><p>true if this instance should be usable by multiple threads concurrently; false if the instance will only be used by one thread at a time.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is initialized with this constructor is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> if <em>isThreadSafe</em> is <strong>true</strong>; otherwise, the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>. The thread safety mode describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>To specify the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a> mode, use the <span class="xref">System.Lazy`1.</span> or <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Boolean__examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor to provide lazy initialization with exception caching, in a scenario with a single thread. It also demonstrates the use of the  <span class="xref">System.Lazy`1.</span>constructor (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a> for <em>mode</em>). To switch to that constructor, just change which constructor is commented out. </p>
<p>For code that demonstrates how to use this constructor in multithreaded scenarios (specifying <strong>true</strong> for <em>isThreadSafe</em>), see the example for the <span class="xref">System.Lazy`1.</span> constructor. </p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by one of several threads. The three key sections of code illustrate the creation of the initializer, the actual initialization, and the constructor of the <code>LargeObject</code> class, which demonstrates exception caching. At the beginning of the <code>Main</code> method, the example creates the thread-safe lazy initializer for <code>LargeObject</code>: </p>System.Lazy`1.ctorFuncBool#NewLazy<p>In the call to the constructor, the <em>isThreadSafe</em> parameter is <strong>false</strong>, so the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> is not thread safe. Because it's not thread safe, the example calls the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property three times on the same thread:</p>System.Lazy`1.ctorFuncBool#ValueProp<p>In the constructor of the <code>LargeObject</code> class, the third key section of code throws an exception the first time a <code>LargeObject</code> instance is created, but thereafter allows instance creation to occur: </p>System.Lazy`1.ctorFuncBool#LargeCtor<p>When the example is run, the first attempt to create an instance of <code>LargeObject</code> fails, and the exception is caught. You might expect that the next attempt would succeed, but the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object has cached the exception. Because of this, all three attempts throw the exception. </p><p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctorFuncBool#All
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentNullException.html#System_ArgumentNullException">ArgumentNullException</a></td>
                    <td><p>
<em>valueFactory</em> is <strong>null</strong>. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor_System_Func__0__System_Threading_LazyThreadSafetyMode_.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor(System.Func%7B%600%7D%2CSystem.Threading.LazyThreadSafetyMode)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L194">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor_System_Func__0__System_Threading_LazyThreadSafetyMode_" data-uid="System.Lazy`1.#ctor(System.Func{`0},System.Threading.LazyThreadSafetyMode)">Lazy(Func&lt;T&gt;, LazyThreadSafetyMode)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class that uses the specified initialization function and thread-safety mode.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Threading_LazyThreadSafetyMode__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached, unless <em>mode</em> is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy(Func&lt;T&gt; valueFactory, LazyThreadSafetyMode mode)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Func%601.html#System_Func_1">Func</a>&lt;T&gt;</td>
                    <td><em>valueFactory</em></td>
                    <td><p>The <span class="xref">System.Func{T}</span> invoked to produce the lazily-initialized value when it is needed.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a></td>
                    <td><em>mode</em></td>
                    <td><p>The lazy thread-safety mode.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Threading_LazyThreadSafetyMode__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
<p>Exceptions that are thrown by <em>valueFactory</em> are cached, unless <em>mode</em> is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_System_Func__0__System_Threading_LazyThreadSafetyMode__examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor to create a lazy initializer that enables multiple threads to race to create an object lazily. Multiple threads might succeed in creating instances, but all threads use the instance that was created first. In addition, the example demonstrates that exceptions are never cached when you specify <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>, even if initialization is performed by a function instead of by the default constructor of the lazily created type. </p>
<p>For an example that demonstrates how to use this constructor in single-threaded scenarios (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a> for <em>mode</em>), see the <span class="xref">System.Lazy`1.</span> constructor. For an example that demonstrates how to use this constructor to provide locking instead of race conditions in multithreaded scenarios (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> for <em>mode</em>), see the <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by any of several threads. The four key sections of code illustrate the creation of the initializer, the actual initialization, the initialization function, and the constructor and finalizer of the <code>LargeObject</code> class. At the beginning of the <code>Main</code> method, the example creates the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object that performs lazy initialization of the <code>LargeObject</code>: </p>System.Lazy`1.ctorFuncLTSM#NewLazy<p>The lazy initializer uses a function to perform the initialization. In this case, a function is required because there is no default constructor for the <code>LargeObject</code> class. </p><p>The example creates and starts three threads that block on a <a class="xref" href="System.Threading.ManualResetEvent.html#System_Threading_ManualResetEvent">ManualResetEvent</a> object, so that the example can release the threads all at once. In the <code>ThreadProc</code> method that's used by all three threads, calling the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property creates the <code>LargeObject</code> instance:</p>System.Lazy`1.ctorFuncLTSM#ValueProp<p>In the third key section of code, the lazy initialization function is called to create the <code>LargeObject</code> instance. The function throws an exception the first time it's called: </p>System.Lazy`1.ctorFuncLTSM#FactoryFunc<p>With any other <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> setting, an unhandled exception in the initialization function would be cached. However, <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a> suppresses exception caching. The output from the example demonstrates that a subsequent attempt to initialize the object succeeds. </p><p>The exception message usually appears after messages indicating that other threads have successfully initialized the object. This is because of the delay introduced by throwing and catching the exception. </p><p>Because the constructor for the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance specified <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>, all three threads are allowed to create <code>LargeObject</code> instances. The example demonstrates this by displaying console messages in the constructor and in the finalizer of the <code>LargeObject</code> class: </p>System.Lazy`1.ctorFuncLTSM#CtorFinalizer<p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object ensures that only one instance is used by all threads (except the thread where the initialization function throws an exception). The output from the example shows this. </p><p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctorFuncLTSM#All
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentOutOfRangeException.html#System_ArgumentOutOfRangeException">ArgumentOutOfRangeException</a></td>
                    <td><p>
<em>mode</em> contains an invalid value. </p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.ArgumentNullException.html#System_ArgumentNullException">ArgumentNullException</a></td>
                    <td><p>
<em>valueFactory</em> is <strong>null</strong>. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1__ctor_System_Threading_LazyThreadSafetyMode_.md&amp;value=---%0Auid%3A%20System.Lazy%601.%23ctor(System.Threading.LazyThreadSafetyMode)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L161">View Source</a>
              </span>
              <h4 id="System_Lazy_1__ctor_System_Threading_LazyThreadSafetyMode_" data-uid="System.Lazy`1.#ctor(System.Threading.LazyThreadSafetyMode)">Lazy(LazyThreadSafetyMode)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class that uses the default constructor of <em>T</em> and the specified thread-safety mode.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1__ctor_System_Threading_LazyThreadSafetyMode__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. </p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public Lazy(LazyThreadSafetyMode mode)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a></td>
                    <td><em>mode</em></td>
                    <td><p>The lazy thread-safety mode mode</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1__ctor_System_Threading_LazyThreadSafetyMode__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The thread safety mode of a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance describes the behavior when multiple threads try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. </p>
<p>A <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance that is created with this constructor does not cache exceptions. For more information, see the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> class or the <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode">LazyThreadSafetyMode</a> enumeration.</p>
</div>
              <h5 id="System_Lazy_1__ctor_System_Threading_LazyThreadSafetyMode__examples">Examples</h5>
              
<p>The following example demonstrates the use of this constructor to create a lazy initializer that enables multiple threads to race to create an object lazily. Multiple threads might succeed in creating instances, but all threads use the instance that was created first. </p>
<p>For an example that demonstrates how to use this constructor in single-threaded scenarios (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a> for <em>mode</em>), see the <span class="xref">System.Lazy`1.</span> constructor. For an example that demonstrates how to use this constructor to provide locking instead of race conditions in multithreaded scenarios (specifying <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> for <em>mode</em>), see the <span class="xref">System.Lazy`1.</span> constructor.</p>
<p>The example defines a <code>LargeObject</code> class that will be initialized lazily by any of several threads. The three key sections of code illustrate the creation of the initializer, the actual initialization, and the constructor and finalizer of the <code>LargeObject</code> class. At the beginning of the <code>Main</code> method, the example creates the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object that performs lazy initialization of the <code>LargeObject</code>: </p>System.Lazy`1.ctorLTSM#NewLazy<p>The example creates and starts three threads that block on a <a class="xref" href="System.Threading.ManualResetEvent.html#System_Threading_ManualResetEvent">ManualResetEvent</a> object, so that the example can release the threads all at once. In the <code>ThreadProc</code> method that's used by all three threads, calling the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property creates the <code>LargeObject</code> instance:</p>System.Lazy`1.ctorLTSM#ValueProp<p>Because the constructor for the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance specified <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>, all three threads are allowed to create <code>LargeObject</code> instances. The example demonstrates this by displaying console messages in the constructor and in the finalizer of the <code>LargeObject</code> class: </p>System.Lazy`1.ctorLTSM#CtorFinalizer<p>However, the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> object ensures that only one instance is used by all threads. The output from the example shows that all three threads use the same instance, and also shows that the other two instances can be reclaimed by garbage collection.</p><p>For simplicity, this example uses a global instance of <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a>, and all the methods are <strong>static</strong> (<strong>Shared</strong> in Visual Basic). These are not requirements for the use of lazy initialization. </p>System.Lazy`1.ctorLTSM#All
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentOutOfRangeException.html#System_ArgumentOutOfRangeException">ArgumentOutOfRangeException</a></td>
                    <td><p>
<em>mode</em> contains an invalid value. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="properties">Properties
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1_IsValueCreated.md&amp;value=---%0Auid%3A%20System.Lazy%601.IsValueCreated%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L281">View Source</a>
              </span>
              <h4 id="System_Lazy_1_IsValueCreated" data-uid="System.Lazy`1.IsValueCreated">IsValueCreated</h4>
              <div class="markdown level1 summary"><p>Gets a value that indicates whether a value has been created for this <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1_IsValueCreated_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p><p>When lazy initialization occurs for a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance, it may result in either a value being created or an exception being thrown. If an exception is thrown, subsequent behavior of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance depends on whether exception caching is in effect. If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance was created by using a constructor that does not specify an initialization function, then exception caching is not in effect. A subsequent attempt to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> might succeed, and after successful initialization the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property returns <strong>true</strong>. If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance was created with an initialization function (specified by the <em>valueFactory</em> parameter of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> constructor), then exception caching is controlled by the thread safety mode.</p></p>
<ul><li>
<p>If the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> or <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>, there is no second chance to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. If an exception occurs and is unhandled in the initialization function, that exception is cached and rethrown on subsequent accesses of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a>property. No value is created if an exception is thrown, so in such cases <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> returns <strong>false</strong>.</p>
</li><li>
<p>If the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>, the first thread that succeeds in running the initialization function (or the default constructor) creates the value for the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. If the initialization function throws an exception on one thread, other threads can still try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. Until the value is created, the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property returns <strong>false</strong>.</p>
</li></ul>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public bool IsValueCreated { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>true if the <span class="xref">System.Lazy{T}</span> instance has been initialized;
otherwise, false.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1_IsValueCreated_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p><p>When lazy initialization occurs for a <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance, it may result in either a value being created or an exception being thrown. If an exception is thrown, subsequent behavior of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance depends on whether exception caching is in effect. If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance was created by using a constructor that does not specify an initialization function, then exception caching is not in effect. A subsequent attempt to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> might succeed, and after successful initialization the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property returns <strong>true</strong>. If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance was created with an initialization function (specified by the <em>valueFactory</em> parameter of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> constructor), then exception caching is controlled by the thread safety mode.</p></p>
<ul><li>
<p>If the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_ExecutionAndPublication">ExecutionAndPublication</a> or <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_None">None</a>, there is no second chance to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. If an exception occurs and is unhandled in the initialization function, that exception is cached and rethrown on subsequent accesses of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a>property. No value is created if an exception is thrown, so in such cases <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> returns <strong>false</strong>.</p>
</li><li>
<p>If the mode is <a class="xref" href="System.Threading.LazyThreadSafetyMode.html#System_Threading_LazyThreadSafetyMode_PublicationOnly">PublicationOnly</a>, the first thread that succeeds in running the initialization function (or the default constructor) creates the value for the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. If the initialization function throws an exception on one thread, other threads can still try to initialize the <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance. Until the value is created, the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property returns <strong>false</strong>.</p>
</li></ul>
</div>
              
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1_Value.md&amp;value=---%0Auid%3A%20System.Lazy%601.Value%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L310">View Source</a>
              </span>
              <h4 id="System_Lazy_1_Value" data-uid="System.Lazy`1.Value">Value</h4>
              <div class="markdown level1 summary"><p>Gets the lazily initialized value of the current <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1_Value_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property is <strong>false</strong>, accessing the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property forces initialization.</p>
<p>In addition to the exceptions that are listed, the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property can throw any unhandled exception that is thrown by the factory method that was passed to the <em>valueFactory</em> parameter of the <span class="xref">System.Lazy`1.</span>, <span class="xref">System.Lazy`1.</span>, or <span class="xref">System.Lazy`1.</span> constructor.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">[DebuggerBrowsable(DebuggerBrowsableState.Never)]
public T Value { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">T</span></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Lazy_1_Value_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>If the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_IsValueCreated">IsValueCreated</a> property is <strong>false</strong>, accessing the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property forces initialization.</p>
<p>In addition to the exceptions that are listed, the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property can throw any unhandled exception that is thrown by the factory method that was passed to the <em>valueFactory</em> parameter of the <span class="xref">System.Lazy`1.</span>, <span class="xref">System.Lazy`1.</span>, or <span class="xref">System.Lazy`1.</span> constructor.</p>
</div>
              
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.MemberAccessException.html#System_MemberAccessException">MemberAccessException</a></td>
                    <td><p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance is initialized to use the default constructor of the type that is being lazily initialized, and permissions to access the constructor are missing. </p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.MissingMemberException.html#System_MissingMemberException">MissingMemberException</a></td>
                    <td><p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1">Lazy<t></t></a> instance is initialized to use the default constructor of the type that is being lazily initialized, and that type does not have a public, parameterless constructor. </p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.InvalidOperationException.html#System_InvalidOperationException">InvalidOperationException</a></td>
                    <td><p>The initialization function tries to access <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> on this instance. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="methods">Methods
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Lazy_1_ToString.md&amp;value=---%0Auid%3A%20System.Lazy%601.ToString%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/coreclr/blob/master/src/mscorlib/src/System/Lazy.cs/#L233">View Source</a>
              </span>
              <h4 id="System_Lazy_1_ToString" data-uid="System.Lazy`1.ToString">ToString()</h4>
              <div class="markdown level1 summary"><p>Creates and returns a string representation of the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property for this instance.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Lazy_1_ToString_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Calling this method does not cause initialization.</p>
<p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property can be <strong>null</strong> after lazy initialization if the factory method that was specified for the <em>valueFactory</em> parameter of the <span class="xref">System.Lazy`1.</span>, <span class="xref">System.Lazy`1.</span>, or <span class="xref">System.Lazy`1.</span> constructor returns <strong>null</strong>. </p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override string ToString()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.String.html#System_String">String</a></td>
                    <td><p>The result of calling <a class="xref" href="System.Object.html#System_Object_ToString">ToString()</a> on the <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Object.html#System_Object_ToString">ToString()</a></div>
              <h5 id="System_Lazy_1_ToString_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Calling this method does not cause initialization.</p>
<p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property can be <strong>null</strong> after lazy initialization if the factory method that was specified for the <em>valueFactory</em> parameter of the <span class="xref">System.Lazy`1.</span>, <span class="xref">System.Lazy`1.</span>, or <span class="xref">System.Lazy`1.</span> constructor returns <strong>null</strong>. </p>
</div>
              
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.NullReferenceException.html#System_NullReferenceException">NullReferenceException</a></td>
                    <td><p>The <a class="xref" href="System.Lazy%601.html#System_Lazy_1_Value">Value</a> property is <strong>null</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
            <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
            </nav>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="inner-footer">
          <p>© .NET Foundation</p>
          <p>
            <a href="https://www.github.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-github fa-stack-1x"></span>
            </span></a>
            <a href="https://twitter.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-twitter fa-stack-1x"></span>
            </span></a>
            <a href="https://www.facebook.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-facebook fa-stack-1x"></span>
            </span></a>
      
          </p>
          </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
