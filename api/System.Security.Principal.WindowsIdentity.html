<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class WindowsIdentity
   | CoreCLR site </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class WindowsIdentity
   | CoreCLR site ">
    
    <link rel="shortcut icon" href="../images/Logo_DotNet.png" type="image/x-icon">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/style.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  
    ga('create', 'UA-63735192-1', 'auto');
    ga('send', 'pageview');
    </script>
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav class="navbar navbar-inverse">
             <div class="container">
               <a href="../"><img height="50px" src="../images/Logo_DotNet.png" style="float:right;"></a>
               <div class="navbar-header ">
                 <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                   <span class="sr-only">Toggle navigation</span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                   <span class="icon-bar"></span>
                 </button>
                 <a class="navbar-brand" href="../"><span class="dotnet">.NET Core</span></a>
               </div>
               <div id="navbar" class="collapse navbar-collapse">
               </div><!--/.nav-collapse -->
             </div>
           </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content">
              
              <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="pull-right mobile-hide"><span class="fa fa-github"></span>Improve this Doc</a>
              <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L191" class="pull-right mobile-hide">View Source</a>
              <h1 id="System_Security_Principal_WindowsIdentity" data-uid="System.Security.Principal.WindowsIdentity">Class WindowsIdentity
              </h1>
              <div class="markdown level0 summary"><p>Represents a Windows user.</p>
</div>
              <div class="markdown level0 conceptual"></div>
              <div class="inheritance">
                <h5>Inheritance</h5>
                  <div class="level0"><a class="xref" href="System.Object.html#System_Object">Object</a></div>
                  <div class="level1"><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity">ClaimsIdentity</a></div>
                  <div class="level2"><span class="xref">WindowsIdentity</span></div>
              </div>
              <h6><strong>Namespace</strong>:System.Security.Principal</h6>
              <h6><strong>Assembly</strong>:System.Security.Principal.Windows.dll</h6>
              <h5 id="System_Security_Principal_WindowsIdentity_syntax">Syntax</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public class WindowsIdentity : ClaimsIdentity, IIdentity, IDisposable</code></pre>
              </div>
              <h5 id="System_Security_Principal_WindowsIdentity_examples"><strong>Examples</strong></h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <h3 id="constructors">Constructors
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.%23ctor(System.IntPtr)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L194">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_" data-uid="System.Security.Principal.WindowsIdentity.#ctor(System.IntPtr)">WindowsIdentity(IntPtr)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class for the user represented by the specified Windows account token.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The following table shows initial property values for an instance of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>.</p>
<p>Property </p>
<p>Initial value </p>
<table><tbody><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a>
</p>
</td><td>
<p>
<strong>Negotiate</strong>
</p>
</td></tr><tr><td>
<p>
<span class="xref">System.Security.Principal.WindowsAccountType</span>
</p>
</td><td>
<p>
<strong>Normal</strong>
</p>
</td></tr><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAuthenticated">IsAuthenticated</a>
</p>
</td><td>
<p>
<strong>false</strong>
</p>
</td></tr></tbody></table>
<p>You can retrieve the token represented by <em>userToken</em> by calling unmanaged code such as the Win32 API LogonUser function. Always release <em>userToken</em> by calling the Win32 API CloseHandle function. For more information on calling unmanaged code, see Consuming Unmanaged DLL Functions.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public WindowsIdentity(IntPtr userToken)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.IntPtr.html#System_IntPtr">IntPtr</a></td>
                    <td><em>userToken</em></td>
                    <td><p>The account token for the user on whose behalf the code is running. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The following table shows initial property values for an instance of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>.</p>
<p>Property </p>
<p>Initial value </p>
<table><tbody><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a>
</p>
</td><td>
<p>
<strong>Negotiate</strong>
</p>
</td></tr><tr><td>
<p>
<span class="xref">System.Security.Principal.WindowsAccountType</span>
</p>
</td><td>
<p>
<strong>Normal</strong>
</p>
</td></tr><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAuthenticated">IsAuthenticated</a>
</p>
</td><td>
<p>
<strong>false</strong>
</p>
</td></tr></tbody></table>
<p>You can retrieve the token represented by <em>userToken</em> by calling unmanaged code such as the Win32 API LogonUser function. Always release <em>userToken</em> by calling the Win32 API CloseHandle function. For more information on calling unmanaged code, see Consuming Unmanaged DLL Functions.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr__examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentException.html#System_ArgumentException">ArgumentException</a></td>
                    <td><p>
<em>userToken</em> is 0.</p>
<p>-or-</p>
<p>
<em>userToken</em> is duplicated and invalid for impersonation.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Security.SecurityException.html#System_Security_SecurityException">SecurityException</a></td>
                    <td><p>The caller does not have the correct permissions. </p>
<p>-or-</p>
<p>A Win32 error occurred.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_System_String_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.%23ctor(System.IntPtr%2CSystem.String)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L195">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_System_String_" data-uid="System.Security.Principal.WindowsIdentity.#ctor(System.IntPtr,System.String)">WindowsIdentity(IntPtr, String)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class for the user represented by the specified Windows account token and the specified authentication type.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_System_String__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The following table shows initial property values for an instance of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>.</p>
<p>Property </p>
<p>Initial value </p>
<table><tbody><tr><td>
<p>
<span class="xref">System.Security.Principal.WindowsAccountType</span>
</p>
</td><td>
<p>
<strong>Normal</strong>
</p>
</td></tr><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAuthenticated">IsAuthenticated</a>
</p>
</td><td>
<p>
<strong>false</strong>
</p>
</td></tr></tbody></table>
<p>The value of the <em>type</em> parameter is used to set the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a> parameter. If <em>type</em> is <strong>null</strong>, the security system sets <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a> to <strong>Negotiate</strong> on Windows Vista and later versions of the Windows operating system, and to <strong>Kerberos</strong> on earlier versions of the Windows operating system. The security system does not use this value; it is for informational use only.</p>
<p>You can retrieve the token represented by <em>userToken</em> by calling unmanaged code such as the Win32 API LogonUser function. Always release <em>userToken</em> by calling the Win32 API CloseHandle function. For more information on calling unmanaged code, see Consuming Unmanaged DLL Functions.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public WindowsIdentity(IntPtr userToken, string type)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.IntPtr.html#System_IntPtr">IntPtr</a></td>
                    <td><em>userToken</em></td>
                    <td><p>The account token for the user on whose behalf the code is running. </p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.String.html#System_String">String</a></td>
                    <td><em>type</em></td>
                    <td><p>(Informational use only.) The type of authentication used to identify the user. For more information, see Remarks.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_System_String__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The following table shows initial property values for an instance of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>.</p>
<p>Property </p>
<p>Initial value </p>
<table><tbody><tr><td>
<p>
<span class="xref">System.Security.Principal.WindowsAccountType</span>
</p>
</td><td>
<p>
<strong>Normal</strong>
</p>
</td></tr><tr><td>
<p>
<a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAuthenticated">IsAuthenticated</a>
</p>
</td><td>
<p>
<strong>false</strong>
</p>
</td></tr></tbody></table>
<p>The value of the <em>type</em> parameter is used to set the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a> parameter. If <em>type</em> is <strong>null</strong>, the security system sets <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_AuthenticationType">AuthenticationType</a> to <strong>Negotiate</strong> on Windows Vista and later versions of the Windows operating system, and to <strong>Kerberos</strong> on earlier versions of the Windows operating system. The security system does not use this value; it is for informational use only.</p>
<p>You can retrieve the token represented by <em>userToken</em> by calling unmanaged code such as the Win32 API LogonUser function. Always release <em>userToken</em> by calling the Win32 API CloseHandle function. For more information on calling unmanaged code, see Consuming Unmanaged DLL Functions.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_IntPtr_System_String__examples">Examples</h5>
              
<p>The following code shows the use of the <span class="xref">System.Security.Principal.WindowsIdentity.</span> constructor to create a new instance of the  <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class for the user represented by the specified Windows account token and the specified authentication type. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#4
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.ArgumentException.html#System_ArgumentException">ArgumentException</a></td>
                    <td><p>
<em>userToken</em> is 0.</p>
<p>-or-</p>
<p>
<em>userToken</em> is duplicated and invalid for impersonation.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Security.SecurityException.html#System_Security_SecurityException">SecurityException</a></td>
                    <td><p>The caller does not have the correct permissions. </p>
<p>-or-</p>
<p>A Win32 error occurred.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity__ctor_System_String_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.%23ctor(System.String)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L196">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity__ctor_System_String_" data-uid="System.Security.Principal.WindowsIdentity.#ctor(System.String)">WindowsIdentity(String)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class for the user represented by the specified User Principal Name (UPN).</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_String__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>A UPN has the format username@domainname.com, in other words, an email address. The UPN identified in <em>sUserPrincipalName</em> is used to retrieve a token for that user through the Win32 API LsaLogonUser function. In turn that token is used to identify the user. An exception might be returned due to the inability to log on using the supplied UPN.</p>
<p>This constructor is intended for use only on computers joined to Windows Server 2003 or later domains. An exception is thrown for earlier domain types. This restriction is due to the fact that this constructor uses the <see href="http://go.microsoft.com/fwlink/?LinkId=143533">KERB_S4U_LOGON structure</see>, which was first introduced in Windows Server 2003. </p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public WindowsIdentity(string sUserPrincipalName)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.String.html#System_String">String</a></td>
                    <td><em>sUserPrincipalName</em></td>
                    <td><p>The UPN for the user on whose behalf the code is running. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_String__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>A UPN has the format username@domainname.com, in other words, an email address. The UPN identified in <em>sUserPrincipalName</em> is used to retrieve a token for that user through the Win32 API LsaLogonUser function. In turn that token is used to identify the user. An exception might be returned due to the inability to log on using the supplied UPN.</p>
<p>This constructor is intended for use only on computers joined to Windows Server 2003 or later domains. An exception is thrown for earlier domain types. This restriction is due to the fact that this constructor uses the <see href="http://go.microsoft.com/fwlink/?LinkId=143533">KERB_S4U_LOGON structure</see>, which was first introduced in Windows Server 2003. </p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity__ctor_System_String__examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.UnauthorizedAccessException.html#System_UnauthorizedAccessException">UnauthorizedAccessException</a></td>
                    <td><p>Windows returned the Windows NT status code STATUS_ACCESS_DENIED.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.OutOfMemoryException.html#System_OutOfMemoryException">OutOfMemoryException</a></td>
                    <td><p>There is insufficient memory available.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Security.SecurityException.html#System_Security_SecurityException">SecurityException</a></td>
                    <td><p>The caller does not have the correct permissions. </p>
<p>-or-</p>
<p>The computer is not attached to a Windows 2003 or later domain.</p>
<p>-or-</p>
<p>The computer is not running Windows 2003 or later.</p>
<p>-or-</p>
<p>The user is not a member of the domain the computer is attached to.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="fields">Fields
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_DefaultIssuer.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.DefaultIssuer%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L193">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_DefaultIssuer" data-uid="System.Security.Principal.WindowsIdentity.DefaultIssuer">DefaultIssuer</h4>
              <div class="markdown level1 summary"><p>Identifies the name of the default <a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity">ClaimsIdentity</a> issuer.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public const string DefaultIssuer = &quot;AD AUTHORITY&quot;</code></pre>
              </div>
              <h5 id="System_Security_Principal_WindowsIdentity_DefaultIssuer_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <h3 id="properties">Properties
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_AccessToken.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.AccessToken%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L197">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_AccessToken" data-uid="System.Security.Principal.WindowsIdentity.AccessToken">AccessToken</h4>
              <div class="markdown level1 summary"><p>Gets this <a class="xref" href="Microsoft.Win32.SafeHandles.SafeAccessTokenHandle.html#Microsoft_Win32_SafeHandles_SafeAccessTokenHandle">SafeAccessTokenHandle</a> for this <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> instance. </p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public SafeAccessTokenHandle AccessToken
{
    [SecurityCritical]
    get;
}</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="Microsoft.Win32.SafeHandles.SafeAccessTokenHandle.html#Microsoft_Win32_SafeHandles_SafeAccessTokenHandle">SafeAccessTokenHandle</a></td>
                    <td><p>Returns a <a class="xref" href="Microsoft.Win32.SafeHandles.SafeAccessTokenHandle.html#Microsoft_Win32_SafeHandles_SafeAccessTokenHandle">SafeAccessTokenHandle</a>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_AccessToken_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_AuthenticationType.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.AuthenticationType%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L198">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_AuthenticationType" data-uid="System.Security.Principal.WindowsIdentity.AuthenticationType">AuthenticationType</h4>
              <div class="markdown level1 summary"><p>Gets the type of authentication used to identify the user.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_AuthenticationType_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This property is informational; it is not used by the security system. On Windows Vista and later versions of the Windows operating system, the default value for this property is <strong>Negotiate</strong>, which chooses the best security support provider (SSP) based on customer-configured security policy. The default property value for earlier versions of the Windows operating system is <strong>Kerberos</strong>.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override sealed string AuthenticationType { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.String.html#System_String">String</a></td>
                    <td><p>The type of authentication used to identify the user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity_AuthenticationType">AuthenticationType</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_AuthenticationType_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This property is informational; it is not used by the security system. On Windows Vista and later versions of the Windows operating system, the default value for this property is <strong>Negotiate</strong>, which chooses the best security support provider (SSP) based on customer-configured security policy. The default property value for earlier versions of the Windows operating system is <strong>Kerberos</strong>.</p>
</div>
              
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.UnauthorizedAccessException.html#System_UnauthorizedAccessException">UnauthorizedAccessException</a></td>
                    <td><p>Windows returned the Windows NT status code STATUS_ACCESS_DENIED.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.OutOfMemoryException.html#System_OutOfMemoryException">OutOfMemoryException</a></td>
                    <td><p>There is insufficient memory available.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Security.SecurityException.html#System_Security_SecurityException">SecurityException</a></td>
                    <td><p>The caller does not have the correct permissions. </p>
<p>-or-</p>
<p>The computer is not attached to a Windows 2003 or later domain.</p>
<p>-or-</p>
<p>The computer is not running Windows 2003 or later.</p>
<p>-or-</p>
<p>The user is not a member of the domain the computer is attached to.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Claims.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Claims%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L199">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Claims" data-uid="System.Security.Principal.WindowsIdentity.Claims">Claims</h4>
              <div class="markdown level1 summary"><p>Gets all claims for the user represented by this Windows identity.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override IEnumerable&lt;Claim&gt; Claims { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Collections.Generic.IEnumerable%601.html#System_Collections_Generic_IEnumerable_1">IEnumerable</a>&lt;<a class="xref" href="System.Security.Claims.Claim.html#System_Security_Claims_Claim">Claim</a>&gt;</td>
                    <td><p>A collection of claims for this <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity_Claims">Claims</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Claims_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Groups.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Groups%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L200">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Groups" data-uid="System.Security.Principal.WindowsIdentity.Groups">Groups</h4>
              <div class="markdown level1 summary"><p>Gets the groups the current Windows user belongs to.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public IdentityReferenceCollection Groups { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.IdentityReferenceCollection.html#System_Security_Principal_IdentityReferenceCollection">IdentityReferenceCollection</a></td>
                    <td><p>An object representing the groups the current Windows user belongs to.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_Groups_examples">Examples</h5>
              
<p>The following code example shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Groups">Groups</a> property to display the identity references for the groups the current user belongs to.  This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#20
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_ImpersonationLevel.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.ImpersonationLevel%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L201">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_ImpersonationLevel" data-uid="System.Security.Principal.WindowsIdentity.ImpersonationLevel">ImpersonationLevel</h4>
              <div class="markdown level1 summary"><p>Gets the impersonation level for the user.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_ImpersonationLevel_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Describes the impersonation level to be used to connect to WMI.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public TokenImpersonationLevel ImpersonationLevel { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.TokenImpersonationLevel.html#System_Security_Principal_TokenImpersonationLevel">TokenImpersonationLevel</a></td>
                    <td><p>One of the enumeration values that specifies the impersonation level. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_ImpersonationLevel_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Describes the impersonation level to be used to connect to WMI.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_ImpersonationLevel_examples">Examples</h5>
              
<p>The following code example shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_ImpersonationLevel">ImpersonationLevel</a> property to display the impersonation level for the current user. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#21
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_IsAnonymous.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.IsAnonymous%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L202">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_IsAnonymous" data-uid="System.Security.Principal.WindowsIdentity.IsAnonymous">IsAnonymous</h4>
              <div class="markdown level1 summary"><p>Gets a value that indicates whether the user account is identified as an anonymous account by the system.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_IsAnonymous_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property detects both the Windows anonymous identity and the anonymous identity that is returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method. </p>
<p>Anonymous accounts are typically only encountered only from within ASP.NET-based applications when anonymous access is allowed by Internet Information Services (IIS).</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public virtual bool IsAnonymous { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the user account is an anonymous account; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_IsAnonymous_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property detects both the Windows anonymous identity and the anonymous identity that is returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method. </p>
<p>Anonymous accounts are typically only encountered only from within ASP.NET-based applications when anonymous access is allowed by Internet Information Services (IIS).</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_IsAnonymous_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property to detect whether the user account is identified as an anonymous account by the system. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#9
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_IsAuthenticated.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.IsAuthenticated%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L203">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_IsAuthenticated" data-uid="System.Security.Principal.WindowsIdentity.IsAuthenticated">IsAuthenticated</h4>
              <div class="markdown level1 summary"><p>Gets a value indicating whether the user has been authenticated by Windows.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override bool IsAuthenticated { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the user was authenticated; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity_IsAuthenticated">IsAuthenticated</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_IsAuthenticated_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_IsGuest.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.IsGuest%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L204">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_IsGuest" data-uid="System.Security.Principal.WindowsIdentity.IsGuest">IsGuest</h4>
              <div class="markdown level1 summary"><p>Gets a value indicating whether the user account is identified as a <span class="xref">System.Security.Principal.WindowsAccountType.Guest</span> account by the system.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public virtual bool IsGuest { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the user account is a <span class="xref">System.Security.Principal.WindowsAccountType.Guest</span> account; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_IsGuest_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsGuest">IsGuest</a> property to return a value indicating whether the user account is identified as a <span class="xref">System.Security.Principal.WindowsAccountType.Guest</span> account by the system. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#12
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_IsSystem.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.IsSystem%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L205">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_IsSystem" data-uid="System.Security.Principal.WindowsIdentity.IsSystem">IsSystem</h4>
              <div class="markdown level1 summary"><p>Gets a value indicating whether the user account is identified as a <span class="xref">System.Security.Principal.WindowsAccountType.System</span> account by the system.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public virtual bool IsSystem { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><p>
<strong>true</strong> if the user account is a <span class="xref">System.Security.Principal.WindowsAccountType.System</span> account; otherwise, <strong>false</strong>.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_IsSystem_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsSystem">IsSystem</a> property to return a value indicating whether the user account is identified as a <span class="xref">System.Security.Principal.WindowsAccountType.System</span> account by the system. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#11
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Name.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Name%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L206">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Name" data-uid="System.Security.Principal.WindowsIdentity.Name">Name</h4>
              <div class="markdown level1 summary"><p>Gets the user&#39;s Windows logon name.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Name_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The logon name is in the form DOMAIN\USERNAME.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override string Name { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.String.html#System_String">String</a></td>
                    <td><p>The Windows logon name of the user on whose behalf the code is being run.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity_Name">Name</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Name_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The logon name is in the form DOMAIN\USERNAME.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_Name_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Name">Name</a> property to get the user's Windows logon name. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#8
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Owner.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Owner%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L207">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Owner" data-uid="System.Security.Principal.WindowsIdentity.Owner">Owner</h4>
              <div class="markdown level1 summary"><p>Gets the security identifier (SID) for the token owner.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Owner_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The SID uniquely identifies a user or group on all Windows NT implementations.  The returned SID identifies the default owner SID that will be applied to newly created objects.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public SecurityIdentifier Owner { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.SecurityIdentifier.html#System_Security_Principal_SecurityIdentifier">SecurityIdentifier</a></td>
                    <td><p>An object for the token owner.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_Owner_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The SID uniquely identifies a user or group on all Windows NT implementations.  The returned SID identifies the default owner SID that will be applied to newly created objects.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_Owner_examples">Examples</h5>
              
<p>The following code example shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Owner">Owner</a> property to display the security identifier for the token owner.  This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class</p>System.Security.Principal.WindowsIdentity_AllMembers#19
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_User.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.User%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L208">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_User" data-uid="System.Security.Principal.WindowsIdentity.User">User</h4>
              <div class="markdown level1 summary"><p>Gets the security identifier (SID) for the user.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_User_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The SID uniquely identifies a user or group on all Windows NT implementations.  </p>
<p>The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method is not the same as the Windows anonymous user. This property gets <strong>null</strong> for an anonymous user represented by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method; it does not get the SID representing an anonymous Windows user.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public SecurityIdentifier User { get; }</code></pre>
              </div>
              <h5 class="propertyValue"></h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.SecurityIdentifier.html#System_Security_Principal_SecurityIdentifier">SecurityIdentifier</a></td>
                    <td><p>An object for the user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_User_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The SID uniquely identifies a user or group on all Windows NT implementations.  </p>
<p>The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method is not the same as the Windows anonymous user. This property gets <strong>null</strong> for an anonymous user represented by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object returned by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method; it does not get the SID representing an anonymous Windows user.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_User_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <h3 id="methods">Methods
              </h3>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Clone.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Clone%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L209">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Clone" data-uid="System.Security.Principal.WindowsIdentity.Clone">Clone()</h4>
              <div class="markdown level1 summary"><p>Creates a new  object that is a copy of the current instance.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public override ClaimsIdentity Clone()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity">ClaimsIdentity</a></td>
                    <td><p>A copy of the current instance.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="overrides">Overrides</h5>
              <div><a class="xref" href="System.Security.Claims.ClaimsIdentity.html#System_Security_Claims_ClaimsIdentity_Clone">Clone()</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Clone_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Dispose.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Dispose%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L210">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Dispose" data-uid="System.Security.Principal.WindowsIdentity.Dispose">Dispose()</h4>
              <div class="markdown level1 summary"><p>Releases all resources used by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>. </p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Call <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> when you are finished using the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>. The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> method leaves the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> in an unusable state. After calling <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a>, you must release all references to the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> so the garbage collector can reclaim the memory that the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> was occupying. For more information, see Cleaning Up Unmanaged Resources and Implementing a Dispose Method. </p>
<p>Always call <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> before you release your last reference to the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>. Otherwise, the resources it is using will not be freed until the garbage collector calls the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object&#39;s <strong>Finalize</strong> method.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
              </div>
              <h5 class="implements">Implements</h5>
                  <div><a class="xref" href="System.IDisposable.html#System_IDisposable_Dispose">Dispose()</a></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>Call <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> when you are finished using the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>. The <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> method leaves the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> in an unusable state. After calling <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a>, you must release all references to the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> so the garbage collector can reclaim the memory that the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> was occupying. For more information, see Cleaning Up Unmanaged Resources and Implementing a Dispose Method. </p>
<p>Always call <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_Dispose">Dispose()</a> before you release your last reference to the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>. Otherwise, the resources it is using will not be freed until the garbage collector calls the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object&#39;s <strong>Finalize</strong> method.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_Dispose_System_Boolean_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.Dispose(System.Boolean)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L211">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_Dispose_System_Boolean_" data-uid="System.Security.Principal.WindowsIdentity.Dispose(System.Boolean)">Dispose(Boolean)</h4>
              <div class="markdown level1 summary"><p>Releases the unmanaged resources used by the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> and optionally releases the managed resources. </p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This method is called by the public <strong>Dispose()</strong><strong></strong>method and the <a class="xref" href="System.Object.html#System_Object_Finalize">Finalize()</a> method. <strong>Dispose()</strong> invokes the protected <strong>Dispose(Boolean)</strong> method with the <em>disposing</em> parameter set to <strong>true</strong>. <a class="xref" href="System.Object.html#System_Object_Finalize">Finalize()</a> invokes <strong>Dispose</strong> with <em>disposing</em> set to <strong>false</strong>.</p>
<p>When the <em>disposing</em> parameter is <strong>true</strong>, this method releases all resources held by any managed objects that this <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> references. This method invokes the <strong>Dispose()</strong> method of each referenced object.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">protected virtual void Dispose(bool disposing)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><em>disposing</em></td>
                    <td><p>
<strong>true</strong> to release both managed and unmanaged resources; <strong>false</strong> to release only unmanaged resources. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This method is called by the public <strong>Dispose()</strong><strong></strong>method and the <a class="xref" href="System.Object.html#System_Object_Finalize">Finalize()</a> method. <strong>Dispose()</strong> invokes the protected <strong>Dispose(Boolean)</strong> method with the <em>disposing</em> parameter set to <strong>true</strong>. <a class="xref" href="System.Object.html#System_Object_Finalize">Finalize()</a> invokes <strong>Dispose</strong> with <em>disposing</em> set to <strong>false</strong>.</p>
<p>When the <em>disposing</em> parameter is <strong>true</strong>, this method releases all resources held by any managed objects that this <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> references. This method invokes the <strong>Dispose()</strong> method of each referenced object.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_Dispose_System_Boolean__examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_GetAnonymous.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.GetAnonymous%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L212">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_GetAnonymous" data-uid="System.Security.Principal.WindowsIdentity.GetAnonymous">GetAnonymous()</h4>
              <div class="markdown level1 summary"><p>Returns a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that you can use as a sentinel value in your code to represent an anonymous user. The property value does not represent the built-in anonymous identity used by the Windows operating system.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetAnonymous_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This property returns an empty <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that enables you to treat operations as anonymous. The property value does not correspond to a Windows anonymous user and cannot be used for impersonation. Also, note that the identity returned by this property is not static; each call to <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> returns a different anonymous identity.</p>
<p>You can use the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property to detect the return value from <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a>. However, <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> detects both the Windows anonymous identity and the anonymous identity returned by this method. To use the latter identity, cache the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> return value instead of relying on the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property.</p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static WindowsIdentity GetAnonymous()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a></td>
                    <td><p>An object that represents an anonymous user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_GetAnonymous_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>This property returns an empty <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that enables you to treat operations as anonymous. The property value does not correspond to a Windows anonymous user and cannot be used for impersonation. Also, note that the identity returned by this property is not static; each call to <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> returns a different anonymous identity.</p>
<p>You can use the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property to detect the return value from <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a>. However, <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> detects both the Windows anonymous identity and the anonymous identity returned by this method. To use the latter identity, cache the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> return value instead of relying on the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_IsAnonymous">IsAnonymous</a> property.</p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetAnonymous_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetAnonymous">GetAnonymous()</a> method to return a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that represents an anonymous Windows user. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#15
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_GetCurrent.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.GetCurrent%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L213">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_GetCurrent" data-uid="System.Security.Principal.WindowsIdentity.GetCurrent">GetCurrent()</h4>
              <div class="markdown level1 summary"><p>Returns a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that represents the current Windows user.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static WindowsIdentity GetCurrent()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a></td>
                    <td><p>An object that represents the current user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_examples">Examples</h5>
              
<p>The following code shows the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_GetCurrent">GetCurrent()</a> method to return a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that represents the current Windows user. This code example is part of a larger example provided for the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.</p>System.Security.Principal.WindowsIdentity_AllMembers#13
              <h5 class="exceptions">Exceptions</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Condition</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.SecurityException.html#System_Security_SecurityException">SecurityException</a></td>
                    <td><p>The caller does not have the correct permissions. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_GetCurrent_System_Boolean_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.GetCurrent(System.Boolean)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L214">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Boolean_" data-uid="System.Security.Principal.WindowsIdentity.GetCurrent(System.Boolean)">GetCurrent(Boolean)</h4>
              <div class="markdown level1 summary"><p>Returns a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that represents the Windows identity for either the thread or the process, depending on the value of the <em>ifImpersonating</em> parameter.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>If <em>ifImpersonating</em> is <strong>true</strong> and the thread is not impersonating, the returned <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object has no value.  If <em>ifImpersonating</em> is <strong>false</strong> and the thread is impersonating, the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> for the thread is returned.  If <em>ifImpersonating</em> is <strong>false</strong> and the thread is not impersonating, the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> for the process is returned.  </p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static WindowsIdentity GetCurrent(bool ifImpersonating)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Boolean.html#System_Boolean">Boolean</a></td>
                    <td><em>ifImpersonating</em></td>
                    <td><p>
<strong>true</strong> to return the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> only if the thread is currently impersonating; <strong>false</strong> to return the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a>   of the thread if it is impersonating or the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> of the process if the thread is not currently impersonating.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a></td>
                    <td><p>An object that represents a Windows user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Boolean__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>If <em>ifImpersonating</em> is <strong>true</strong> and the thread is not impersonating, the returned <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object has no value.  If <em>ifImpersonating</em> is <strong>false</strong> and the thread is impersonating, the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> for the thread is returned.  If <em>ifImpersonating</em> is <strong>false</strong> and the thread is not impersonating, the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> for the process is returned.  </p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Boolean__examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_GetCurrent_System_Security_Principal_TokenAccessLevels_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.GetCurrent(System.Security.Principal.TokenAccessLevels)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L215">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Security_Principal_TokenAccessLevels_" data-uid="System.Security.Principal.WindowsIdentity.GetCurrent(System.Security.Principal.TokenAccessLevels)">GetCurrent(TokenAccessLevels)</h4>
              <div class="markdown level1 summary"><p>Returns a <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> object that represents the current Windows user, using the specified desired token access level.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Security_Principal_TokenAccessLevels__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <em>desiredAccess</em> parameter specifies an access mask that identifies the requested types of access to the access token. These requested access types are compared with the token&#39;s discretionary access control list (DACL) to determine which types of access are granted or denied. </p>
</div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static WindowsIdentity GetCurrent(TokenAccessLevels desiredAccess)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.TokenAccessLevels.html#System_Security_Principal_TokenAccessLevels">TokenAccessLevels</a></td>
                    <td><em>desiredAccess</em></td>
                    <td><p>A bitwise combination of the enumeration values. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a></td>
                    <td><p>An object that represents the current user.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Security_Principal_TokenAccessLevels__remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The <em>desiredAccess</em> parameter specifies an access mask that identifies the requested types of access to the access token. These requested access types are compared with the token&#39;s discretionary access control list (DACL) to determine which types of access are granted or denied. </p>
</div>
              <h5 id="System_Security_Principal_WindowsIdentity_GetCurrent_System_Security_Principal_TokenAccessLevels__examples">Examples</h5>
              
<p>The following example shows the use of members of <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class.  For an example showing how to obtain a Windows account token through a call to the unmanaged Win32 LogonUser function, and use that token to impersonate another user, see the <span class="xref">System.Security.Principal.WindowsImpersonationContext</span> class.   </p>System.Security.Principal.WindowsIdentity_AllMembers#1
              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_RunImpersonated_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Action_.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.RunImpersonated(Microsoft.Win32.SafeHandles.SafeAccessTokenHandle%2CSystem.Action)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L216">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_RunImpersonated_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Action_" data-uid="System.Security.Principal.WindowsIdentity.RunImpersonated(Microsoft.Win32.SafeHandles.SafeAccessTokenHandle,System.Action)">RunImpersonated(SafeAccessTokenHandle, Action)</h4>
              <div class="markdown level1 summary"><p>Runs the specified action as the impersonated Windows identity. Instead of using an impersonated method call and running your function in <span class="xref">System.Security.Principal.WindowsImpersonationContext</span>, you can use <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_RunImpersonated_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Action_">RunImpersonated(SafeAccessTokenHandle, Action)</a> and provide your function directly as a parameter.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static void RunImpersonated(SafeAccessTokenHandle safeAccessTokenHandle, Action action)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="Microsoft.Win32.SafeHandles.SafeAccessTokenHandle.html#Microsoft_Win32_SafeHandles_SafeAccessTokenHandle">SafeAccessTokenHandle</a></td>
                    <td><em>safeAccessTokenHandle</em></td>
                    <td><p>The SafeAccessTokenHandle of the impersonated Windows identity.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Action.html#System_Action">Action</a></td>
                    <td><em>action</em></td>
                    <td><p>The System.Action to run. </p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_RunImpersonated_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Action__examples">Examples</h5>
              
<p>The following example demonstrates the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class to impersonate a user.</p>
<p>This sample asks the user to enter a password on the console screen. The password will be visible on the screen, because the console window does not support masked input natively.</p>
<pre><code class="c#">// The following example demonstrates the use of the WindowsIdentity class to impersonate a user. 
// IMPORTANT NOTE: 
// This sample asks the user to enter a password on the console screen. 
// The password will be visible on the screen, because the console window 
// does not support masked input natively.


using System;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.Principal;
using Microsoft.Win32.SafeHandles;

public class ImpersonationDemo
{
[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword,
int dwLogonType, int dwLogonProvider, out SafeAccessTokenHandle phToken);

public static void Main()
{
// Get the user token for the specified user, domain, and password using the 
// unmanaged LogonUser method. 
// The local machine name can be used for the domain name to impersonate a user on this machine.
Console.Write("Enter the name of the domain on which to log on: ");
string domainName = Console.ReadLine();

Console.Write("Enter the login of a user on {0} that you wish to impersonate: ", domainName);
string userName = Console.ReadLine();

Console.Write("Enter the password for {0}: ", userName);

const int LOGON32_PROVIDER_DEFAULT = 0;
//This parameter causes LogonUser to create a primary token. 
const int LOGON32_LOGON_INTERACTIVE = 2;

// Call LogonUser to obtain a handle to an access token. 
SafeAccessTokenHandle safeAccessTokenHandle;
bool returnValue = LogonUser(userName, domainName, Console.ReadLine(),
    LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT,
    out safeAccessTokenHandle);

if (false == returnValue)
{
    int ret = Marshal.GetLastWin32Error();
    Console.WriteLine("LogonUser failed with error code : {0}", ret);
    throw new System.ComponentModel.Win32Exception(ret);
}

Console.WriteLine("Did LogonUser Succeed? " + (returnValue ? "Yes" : "No"));
// Check the identity.
Console.WriteLine("Before impersonation: " + WindowsIdentity.GetCurrent().Name);

// Note: if you want to run as unimpersonated, pass
//       'SafeAccessTokenHandle.InvalidHandle' instead of variable 'safeAccessTokenHandle'
WindowsIdentity.RunImpersonated(
    safeAccessTokenHandle,
    // User action
    () =>
    {
        // Check the identity.
        Console.WriteLine("During impersonation: " + WindowsIdentity.GetCurrent().Name);
    }
    );

// Check the identity again.
Console.WriteLine("After impersonation: " + WindowsIdentity.GetCurrent().Name);
}
}</code></pre>

              <span class="small pull-right mobile-hide">
                <span class="divider">|</span>
                <a href="https://github.com/dotnet/core-docs/new/master/apispec/new?filename=System_Security_Principal_WindowsIdentity_RunImpersonated__1_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Func___0__.md&amp;value=---%0Auid%3A%20System.Security.Principal.WindowsIdentity.RunImpersonated%60%601(Microsoft.Win32.SafeHandles.SafeAccessTokenHandle%2CSystem.Func%7B%60%600%7D)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
              </span>
              <span class="small pull-right mobile-hide">
                <a href="https://github.com/dotnet/corefx/blob/master/src/System.Security.Principal.Windows/ref/System.Security.Principal.Windows.cs/#L217">View Source</a>
              </span>
              <h4 id="System_Security_Principal_WindowsIdentity_RunImpersonated__1_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Func___0__" data-uid="System.Security.Principal.WindowsIdentity.RunImpersonated``1(Microsoft.Win32.SafeHandles.SafeAccessTokenHandle,System.Func{``0})">RunImpersonated&lt;T&gt;(SafeAccessTokenHandle, Func&lt;T&gt;)</h4>
              <div class="markdown level1 summary"><p>Runs the specified function as the impersonated Windows identity. Instead of using an impersonated method call and running your function in <span class="xref">System.Security.Principal.WindowsImpersonationContext</span>, you can use <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity_RunImpersonated_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Action_">RunImpersonated(SafeAccessTokenHandle, Action)</a> and provide your function directly as a parameter.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public static T RunImpersonated&lt;T&gt;(SafeAccessTokenHandle safeAccessTokenHandle, Func&lt;T&gt; func)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><a class="xref" href="Microsoft.Win32.SafeHandles.SafeAccessTokenHandle.html#Microsoft_Win32_SafeHandles_SafeAccessTokenHandle">SafeAccessTokenHandle</a></td>
                    <td><em>safeAccessTokenHandle</em></td>
                    <td><p>The SafeAccessTokenHandle of the impersonated Windows identity.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="System.Func%601.html#System_Func_1">Func</a>&lt;T&gt;</td>
                    <td><em>func</em></td>
                    <td><p>The System.Func to run.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 class="returns">Returns</h5>
              <table class="table table-bordered table-striped table-condensed">
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">T</span></td>
                    <td><p>Returns the result of the function.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="System_Security_Principal_WindowsIdentity_RunImpersonated__1_Microsoft_Win32_SafeHandles_SafeAccessTokenHandle_System_Func___0___examples">Examples</h5>
              
<p>The following example demonstrates the use of the <a class="xref" href="System.Security.Principal.WindowsIdentity.html#System_Security_Principal_WindowsIdentity">WindowsIdentity</a> class to impersonate a user.</p>
<p>This sample asks the user to enter a password on the console screen. The password will be visible on the screen, because the console window does not support masked input natively.</p>
<pre><code class="c#">// The following example demonstrates the use of the WindowsIdentity class to impersonate a user. 
// IMPORTANT NOTE: 
// This sample asks the user to enter a password on the console screen. 
// The password will be visible on the screen, because the console window 
// does not support masked input natively.


using System;
using System.Runtime.InteropServices;
using System.Security;
using System.Security.Principal;
using Microsoft.Win32.SafeHandles;

public class ImpersonationDemo
{
[DllImport("advapi32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
public static extern bool LogonUser(String lpszUsername, String lpszDomain, String lpszPassword,
int dwLogonType, int dwLogonProvider, out SafeAccessTokenHandle phToken);

public static void Main()
{
// Get the user token for the specified user, domain, and password using the 
// unmanaged LogonUser method. 
// The local machine name can be used for the domain name to impersonate a user on this machine.
Console.Write("Enter the name of the domain on which to log on: ");
string domainName = Console.ReadLine();

Console.Write("Enter the login of a user on {0} that you wish to impersonate: ", domainName);
string userName = Console.ReadLine();

Console.Write("Enter the password for {0}: ", userName);

const int LOGON32_PROVIDER_DEFAULT = 0;
//This parameter causes LogonUser to create a primary token. 
const int LOGON32_LOGON_INTERACTIVE = 2;

// Call LogonUser to obtain a handle to an access token. 
SafeAccessTokenHandle safeAccessTokenHandle;
bool returnValue = LogonUser(userName, domainName, Console.ReadLine(),
    LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT,
    out safeAccessTokenHandle);

if (false == returnValue)
{
    int ret = Marshal.GetLastWin32Error();
    Console.WriteLine("LogonUser failed with error code : {0}", ret);
    throw new System.ComponentModel.Win32Exception(ret);
}

Console.WriteLine("Did LogonUser Succeed? " + (returnValue ? "Yes" : "No"));
// Check the identity.
Console.WriteLine("Before impersonation: " + WindowsIdentity.GetCurrent().Name);

// Note: if you want to run as unimpersonated, pass
//       'SafeAccessTokenHandle.InvalidHandle' instead of variable 'safeAccessTokenHandle'
WindowsIdentity.RunImpersonated(
    safeAccessTokenHandle,
    // User action
    () =>
    {
        // Check the identity.
        Console.WriteLine("During impersonation: " + WindowsIdentity.GetCurrent().Name);
    }
    );

// Check the identity again.
Console.WriteLine("After impersonation: " + WindowsIdentity.GetCurrent().Name);
}
}</code></pre>

            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
            <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
            </nav>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="inner-footer">
          <p>© .NET Foundation</p>
          <p>
            <a href="https://www.github.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-github fa-stack-1x"></span>
            </span></a>
            <a href="https://twitter.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-twitter fa-stack-1x"></span>
            </span></a>
            <a href="https://www.facebook.com/dotnet" target="_blank"><span class="fa fa-stack fa-lg">
              <span class="fa fa-square-o fa-stack-2x"></span>
              <span class="fa fa-facebook fa-stack-1x"></span>
            </span></a>
      
          </p>
          </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>
